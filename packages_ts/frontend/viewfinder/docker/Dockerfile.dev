FROM node:latest
LABEL maintainer="Marc <xtof@relica.io>"

WORKDIR /usr/src/app

# For development, we don't need to install dependencies inside the container
# The entire codebase including node_modules will be mounted as volumes in docker-compose.dev.yml

# Set up environment for development
WORKDIR /usr/src/app/packages_ts/frontend/viewfinder

# Environment variables for local development
ENV NODE_ENV=development
ENV VITE_RELICA_ARCHIVIST_API_URL=http://localhost:3000
ENV VITE_RELICA_CC_API_URL=http://localhost:2176
ENV VITE_RELICA_CC_SOCKET_URL=ws://localhost:2176
ENV VITE_PORTAL_API_URL=http://localhost:2174
ENV VITE_PORTAL_WS_URL=ws://localhost:2174
ENV VITE_SHUTTER_API_URL=http://localhost:2173
ENV VITE_RELICA_NOUS_SOCKET_URL=ws://localhost:2204

# Expose development server port
EXPOSE 5173

# Start development server with hot reloading
CMD ["yarn", "dev", "--host", "0.0.0.0"]
